{
  "meta": {
    "project": "Sistema de Indicadores Bombeiro MedMais",
    "date": "2025-11-14",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "O Sistema de Indicadores Bombeiro MedMais é uma plataforma web destinada a gerenciar, monitorar e analisar indicadores operacionais das seções de Bombeiro de Aeródromo do Grupo MedMais, facilitando a coleta, visualização e análise de dados para suportar a tomada de decisão.",
  "core_goals": [
    "Centralizar o registro e gerenciamento de indicadores operacionais.",
    "Fornecer dashboards analíticos com visualizações gráficas interativas.",
    "Garantir segurança e isolamento de dados por meio de autenticação, autorização e Row Level Security.",
    "Permitir análise histórica eficiente com filtros avançados e navegação por temas.",
    "Otimizar a performance do sistema com caching inteligente e tratamento eficiente de dados."
  ],
  "key_features": [
    "Sistema completo de autenticação e autorização com perfis (Gestor POP, Gerente de Seção, BA-CE).",
    "Dashboard consolidado com 14 tipos de indicadores operacionais exibidos em gráficos interativos e métricas.",
    "Módulo para preenchimento de indicadores com formulários e validação em tempo real.",
    "Módulo de consulta histórica com navegação por temas, filtros avançados, paginação e cache.",
    "Sistema inteligente de cache em memória com stale time e debounce para otimização de performance.",
    "Visualizações gráficas diversas (LineChart, BarChart, AreaChart, PieChart, Treemap, Heatmap) com tema laranja/branco/preto.",
    "Gerenciamento de permissões e isolamento de dados por seção e equipe via Row Level Security.",
    "Componentes UI reutilizáveis e layout responsivo com sidebar e header.",
    "Tratamento robusto de erros com mensagens amigáveis, retry automático e logs detalhados."
  ],
  "user_flow_summary": [
    "Fluxo de autenticação: login, validação de credenciais, gerenciamento de sessão e logout.",
    "Fluxo de preenchimento de indicadores: seleção do indicador, preenchimento do formulário, validação, salvamento e atualização do dashboard.",
    "Fluxo de visualização do dashboard: navegação entre abas, carregamento otimizado via cache, aplicação de filtros e exibição de gráficos e métricas.",
    "Fluxo de consulta histórica: seleção de tema, aplicação de filtros, navegação com paginação, uso de cache e atualização em background.",
    "Isolamento de dados automático com filtros baseados em perfil e seções para garantir segurança e privacidade."
  ],
  "validation_criteria": [
    "Autenticação segura via Supabase Auth com perfis corretos e sessões persistentes.",
    "Isolamento e segurança de dados garantidos via Row Level Security e filtros automáticos nas queries.",
    "Performance respeitando tempos máximos de carregamento e resposta (ex: <3s inicial, <500ms navegação).",
    "Validação completa dos dados nos formulários, com feedback visual e cálculos automáticos.",
    "Cache funcionando com tempos de frescor e stale definidos, e atualização transparente em background.",
    "Visualização gráfica correta e responsiva conforme os dados filtrados.",
    "Tratamento de erros eficaz com mensagens claras, retries automáticos e logs para debugging.",
    "Interface responsiva e acessível conforme os perfis de usuário e dispositivos."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 15.5.6",
      "React 19.1.0",
      "Supabase (PostgreSQL)",
      "Tailwind CSS 4",
      "Recharts",
      "Framer Motion",
      "Zod",
      "React Hook Form"
    ],
    "features": [
      {
        "name": "Sistema de Autenticação",
        "description": "Gerenciamento completo de autenticação de usuários com perfis (Gestor POP, Gerente de Seção, BA-CE), sessão persistente e Row Level Security",
        "files": [
          "src/hooks/useAuth.ts",
          "src/contexts/AuthContext.tsx",
          "src/app/login/page.tsx",
          "src/app/register/page.tsx",
          "src/components/auth/ProtectedRoute.tsx"
        ]
      },
      {
        "name": "Dashboard de Indicadores Operacionais",
        "description": "Visualização consolidada de 14 tipos de indicadores com gráficos interativos, métricas e filtros avançados",
        "files": [
          "src/app/dashboard/page.tsx",
          "src/app/dashboard/ocorrencias-aeronauticas/page.tsx",
          "src/app/dashboard/ocorrencia-nao-aeronautica/page.tsx",
          "src/app/dashboard/atividades-acessorias/page.tsx",
          "src/app/dashboard/taf/page.tsx",
          "src/app/dashboard/ptr-ba-prova-teorica/page.tsx",
          "src/app/dashboard/ptr-ba-horas-treinamento/page.tsx",
          "src/app/dashboard/tempo-epr/page.tsx",
          "src/app/dashboard/tempo-resposta/page.tsx",
          "src/app/dashboard/controle-agentes-extintores/page.tsx",
          "src/app/dashboard/controle-trocas/page.tsx",
          "src/app/dashboard/verificacao-tps/page.tsx",
          "src/app/dashboard/higienizacao-tps/page.tsx",
          "src/app/dashboard/controle-uniformes-recebidos/page.tsx",
          "src/components/dashboard/IndicatorsNavbar.tsx"
        ]
      },
      {
        "name": "Sistema de Cache e Performance",
        "description": "Sistema inteligente de cache em memória com stale time, debouncing, abort controllers e otimizações de performance",
        "files": [
          "src/hooks/useDashboardCache.ts",
          "src/hooks/useDashboardData.ts",
          "src/hooks/useDebounce.ts",
          "src/hooks/useHistoricoData.ts"
        ]
      },
      {
        "name": "Visualizações Gráficas",
        "description": "Gráficos interativos usando Recharts (LineChart, BarChart, AreaChart, PieChart, Treemap, Heatmap) com tema laranja/branco/preto",
        "files": [
          "src/app/dashboard/ocorrencias-aeronauticas/page.tsx",
          "src/app/dashboard/ocorrencia-nao-aeronautica/page.tsx",
          "src/app/dashboard/tempo-epr/page.tsx",
          "src/app/dashboard/taf/page.tsx"
        ]
      },
      {
        "name": "Módulo de Preenchimento de Indicadores",
        "description": "Modais e formulários para registro de indicadores operacionais com validação e cálculos automáticos",
        "files": [
          "src/app/indicadores/page.tsx",
          "src/app/indicadores/preencher/page.tsx",
          "src/components/modals/ModalTempoResposta.tsx",
          "src/components/modals/ModalTempoEPR.tsx",
          "src/components/modals/TAFModal.tsx",
          "src/components/modals/PTRBAModal.tsx",
          "src/components/modals/ModalInspecaoViaturas.tsx",
          "src/components/modals/ModalControleAgentesExtintores.tsx",
          "src/components/modals/ModalControleTrocas.tsx",
          "src/components/modals/ModalVerificacaoTPs.tsx",
          "src/components/modals/ModalHigienizacaoTPS.tsx",
          "src/components/modals/ModalControleUniformesRecebidos.tsx",
          "src/components/modals/AtividadesAcessoriasModal.tsx",
          "src/components/forms/OcorrenciaAeronauticaForm.tsx",
          "src/components/forms/OcorrenciaNaoAeronauticaForm.tsx"
        ]
      },
      {
        "name": "Módulo de Histórico",
        "description": "Consulta e análise histórica de indicadores com filtros avançados, navegação por temas e paginação",
        "files": [
          "src/app/historico/page.tsx",
          "src/components/historico/HistoricoIndicadores.tsx",
          "src/components/historico/NavbarTemas.tsx",
          "src/components/historico/FiltrosHistorico.tsx",
          "src/components/historico/VisualizacaoTema.tsx",
          "src/hooks/useHistoricoData.ts"
        ]
      },
      {
        "name": "Hooks de Dados Específicos",
        "description": "Hooks customizados para cada tipo de indicador com lógica de negócio, validação e integração com Supabase",
        "files": [
          "src/hooks/useTempoResposta.ts",
          "src/hooks/useTempoEPR.ts",
          "src/hooks/useTAF.ts",
          "src/hooks/usePTRBA.ts",
          "src/hooks/useHorasTreinamento.ts",
          "src/hooks/useInspecaoViaturas.ts",
          "src/hooks/useControleAgentesExtintores.ts",
          "src/hooks/useControleTrocas.ts",
          "src/hooks/useVerificacaoTPs.ts",
          "src/hooks/useHigienizacaoTPS.ts",
          "src/hooks/useControleUniformesRecebidos.ts",
          "src/hooks/useAtividadesAcessorias.ts",
          "src/hooks/useOcorrenciasAeronauticas.ts",
          "src/hooks/useOcorrenciasNaoAeronauticas.ts"
        ]
      },
      {
        "name": "Sistema de Permissões",
        "description": "Gerenciamento de permissões baseado em perfis de usuário com isolamento de dados por seção e equipe",
        "files": [
          "src/hooks/usePermissions.ts",
          "src/types/auth.ts"
        ]
      },
      {
        "name": "Componentes de UI Reutilizáveis",
        "description": "Componentes de interface padronizados incluindo navbar, paginação, filtros e botões",
        "files": [
          "src/components/ui/tubelight-navbar.tsx",
          "src/components/ui/pagination.tsx",
          "src/components/ui/button.tsx",
          "src/components/filters/DateRangeFilter.tsx",
          "src/components/filters/EquipeFilter.tsx",
          "src/components/filters/SecaoFilter.tsx"
        ]
      },
      {
        "name": "Layout e Navegação",
        "description": "Layout principal do dashboard com sidebar, header e sistema de navegação responsivo",
        "files": [
          "src/components/layout/DashboardLayout.tsx",
          "src/components/layout/Layout.tsx",
          "src/app/dashboard/layout.tsx"
        ]
      },
      {
        "name": "Contextos de Estado Global",
        "description": "Contextos React para gerenciamento de estado global de seções e equipes",
        "files": [
          "src/contexts/SecoesContext.tsx",
          "src/contexts/AuthContext.tsx"
        ]
      },
      {
        "name": "Utilitários e Helpers",
        "description": "Funções utilitárias para queries, validação, segurança e formatação de dados",
        "files": [
          "src/utils/dashboardDataLoader.ts",
          "src/utils/dashboardQueryBuilder.ts",
          "src/lib/utils.ts",
          "src/lib/security.ts",
          "src/lib/supabase.ts"
        ]
      },
      {
        "name": "Sistema de Métricas e Análise",
        "description": "Cálculo e exibição de métricas operacionais, KPIs e análises estatísticas",
        "files": [
          "src/hooks/useDashboardMetrics.ts"
        ]
      }
    ]
  }
}
